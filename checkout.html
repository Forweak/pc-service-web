<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Test MP</title>
</head>
<body>

<button onclick="testMP()">TEST MERCADOPAGO</button>

<script>
async function testMP() {
console.log('1️⃣ CLICK DETECTADO');

try {
    const res = await fetch('/create-preference', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        title: 'Test MP',
        price: 1000
    })
    });

    console.log('2️⃣ FETCH RESPONDIÓ', res.status);

    const text = await res.text();
    console.log('3️⃣ RESPUESTA CRUDA:', text);

} catch (err) {
    console.error('❌ ERROR FETCH:', err);
}
}
</script>

</body>
</html>