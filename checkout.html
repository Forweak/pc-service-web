<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Checkout | SXZ Boost</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link rel="stylesheet" href="assets/css/style.css" />

<style>
    body {
    background: #0b0b10;
    color: #fff;
    font-family: system-ui, sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    }

    .checkout {
    max-width: 420px;
    width: 100%;
    background: #12121a;
    border-radius: 16px;
    padding: 24px;
    box-shadow: 0 0 40px rgba(255,0,80,.15);
    }

    h1 {
    color: #ff0055;
    margin-bottom: 16px;
    text-align: center;
    }

    .summary {
    background: #0e0e15;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 20px;
    }

    .summary h3 {
    margin: 0;
    color: #fff;
    }

    .price {
    margin-top: 8px;
    font-size: 20px;
    color: #00ffcc;
    }

    .btn-pagar {
    width: 100%;
    padding: 14px;
    font-size: 16px;
    border-radius: 12px;
    border: none;
    background: linear-gradient(90deg,#00aaff,#00ffcc);
    color: #000;
    cursor: pointer;
    font-weight: bold;
    }

    .info {
    margin-top: 16px;
    font-size: 14px;
    opacity: .8;
    text-align: center;
    }
</style>
</head>

<body>

<div class="checkout">

    <h1>Resumen de compra</h1>

    <div class="summary">
    <h3 id="producto">Optimizacion So Bios</h3>
    <div class="price">$30.000 ARS</div>
    </div>

    <button class="btn-pagar">Pagar con MercadoPago</button>

    <div class="info">
    Ser√°s redirigido al checkout seguro de MercadoPago
    </div>

</div>

<script>
    const payButton = document.querySelector(".btn-pagar");

    payButton.addEventListener("click", async () => {

    const producto = document.getElementById("producto").textContent;

    const precios = {
        "Optimizacion So Bios": 30000,
        "Ensamble Pc": 30000,
        "Limpieza Gpu": 25000
    };

    const res = await fetch("/create-preference", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
        title: producto,
        price: precios[producto]
        })
    });

    const data = await res.json();

    window.location.href =
        `https://www.mercadopago.com/checkout/v1/redirect?pref_id=${data.id}`;
    });
</script>

</body>
</html>