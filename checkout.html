<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>Checkout | SXZ Boost</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Montserrat:wght@700;800&display=swap" rel="stylesheet">

<style>
:root {
    --bg: #0e1014;
    --card: #0f1216;
    --muted: #aeb0bb;
    --accent-1: #00aaff;
    --accent-2: #00ffcc;
    --success: #00ffd1;
    --surface: rgba(255,255,255,0.02);
    --max-width: 1000px;
}
html, body {height:100%; margin:0; padding:0; font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background: radial-gradient(circle at top, #141623 0%, var(--bg) 60%); color:#fff; display:flex; justify-content:center; align-items:center; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; padding:24px;}
.muted { color: var(--muted); font-size:.95rem; }

.checkout-card { display:flex; gap:0; width:100%; max-width: var(--max-width); background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.06)); border-radius:12px; overflow:hidden; box-shadow: 0 12px 40px rgba(0,0,0,0.7); }
.checkout-left { flex:1 1 60%; padding:28px; display:flex; flex-direction:column; gap:18px; background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.04)); }
.checkout-right { width:320px; min-width:220px; padding:20px; background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(0,0,0,0.02)); border-left:1px solid rgba(255,255,255,0.03); display:flex; flex-direction:column; gap:12px; align-items:center; }

.summary-header { display:flex; justify-content:space-between; align-items:flex-start; gap:12px; }
.summary-title { font-family: 'Montserrat', sans-serif; font-weight:800; font-size:1.05rem; letter-spacing:-0.3px; color: var(--accent-1); }
.summary-sub { color: var(--muted); font-size:.95rem; }

.summary-box { background: var(--surface); padding:14px; border-radius:10px; border:1px solid rgba(255,255,255,0.03); display:grid; grid-template-columns: 1fr auto; gap:10px; align-items:start; }
.summary-product { font-weight:700; font-size:1rem; color:#fff; }
.summary-price { font-weight:800; font-size:1.15rem; color:var(--success); }

.trust h3 { font-family:'Montserrat', sans-serif; font-weight:700; font-size:1rem; margin:0; color:#fff; }
.trust ul { margin:0; padding-left:18px; list-style:none; display:flex; flex-direction:column; gap:8px; }
.trust li { display:flex; align-items:flex-start; gap:10px; font-size:.95rem; }
.trust svg.check { flex:0 0 18px; margin-top:3px; fill:var(--accent-2); }

.method-panel { margin-top:8px; background: rgba(0,0,0,0.05); border-radius:10px; padding:14px; border:1px solid rgba(255,255,255,0.03); display:flex; flex-direction:column; gap:10px; }
.method-name { font-weight:700; color:var(--success); font-size:1.02rem; }
.method-desc { color:var(--muted); font-size:.95rem; }
.action-row { display:flex; gap:12px; margin-top:8px; align-items:center; }
.btn-pay { padding:12px 18px; border-radius:10px; border:none; background: linear-gradient(90deg,var(--accent-1),var(--accent-2)); color:#000; font-weight:800; cursor:pointer; font-size:1rem; box-shadow:0 10px 30px rgba(0,170,255,0.08); position:relative; }
.btn-pay[disabled] { opacity:.6; cursor:not-allowed; transform:none; }
.btn-pay.loading::after { content:''; display:inline-block; margin-left:8px; border:2px solid #fff; border-top:2px solid transparent; border-radius:50%; width:16px; height:16px; animation:spin 0.8s linear infinite; }
@keyframes spin { 100% { transform: rotate(360deg); } }

.btn-small { padding:8px 12px; border-radius:8px; background:transparent; border:1px solid rgba(255,255,255,0.04); color:var(--muted); cursor:pointer; font-weight:600; }

.icons-title { color: var(--muted); font-size:.95rem; margin-bottom:6px; }
.icons-wrap { display:flex; flex-direction:column; gap:10px; align-items:center; width:100%; }
.pay-icon { width:64px; height:64px; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease; border:1px solid rgba(255,255,255,0.03); }
.pay-icon img { width:36px; height:auto; max-width:60%; display:block; padding:6px; border-radius:6px; }
.pay-icon[data-method="mp"] { background:#009EE3; }
.pay-icon[data-method="paypal"] { background:#FFFFFF; }
.pay-icon[data-method="bank"] { background:#6c757d; }
.pay-icon[data-method="crypto"] { background:#26a17b; }
.pay-icon:hover { transform:translateY(-4px); box-shadow:0 10px 30px rgba(0,0,0,0.6); }
.pay-icon.active { box-shadow:0 10px 30px rgba(0,170,255,0.14); }
.icons-note { color:var(--muted); font-size:.86rem; text-align:center; margin-top:6px; }

.cards-accepted { display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-top:16px; }
.cards-accepted .card-icon { height:40px; }

.sxz-tooltip { position:fixed; background:#081018; color:var(--success); border-radius:8px; padding:6px 8px; font-weight:700; font-size:.82rem; box-shadow:0 8px 30px rgba(0,0,0,0.6); transform:translateY(6px); opacity:0; pointer-events:none; transition:all .18s ease; z-index:1200; }
.sxz-tooltip.show { transform:translateY(0); opacity:1; }

@media(max-width:880px){ .checkout-card { flex-direction:column; } .checkout-right { width:100%; min-width:unset; order:2; padding:18px; } .checkout-left { order:1; padding:18px; } .icons-wrap { flex-direction:row; gap:12px; flex-wrap:wrap; justify-content:center; } }
@media(max-width:500px){ .pay-icon { width:48px; height:48px; } .pay-icon img { width:24px; max-width:70%; padding:4px; } }
.pay-icon:focus { outline:3px solid rgba(0,170,255,0.14); outline-offset:4px; }
.btn-pay:focus, .btn-small:focus { outline:3px solid rgba(0,170,255,0.14); outline-offset:3px; }
</style>
</head>
<body>

<div class="checkout-card" role="region" aria-label="Checkout — métodos de pago">

<!-- LEFT -->
<div class="checkout-left">
    <div class="summary-header">
        <div>
            <div class="summary-title">Resumen de compra</div>
            <div class="summary-sub">Página de pago - SXZ Boost</div>
        </div>
        <div style="text-align:right">
            <div class="summary-product" id="productName">Optimización S.O & BIOS</div>
            <div class="summary-price" id="productPrice" data-value="50000">$50.000 ARS</div>
        </div>
    </div>

    <div class="summary-box" aria-live="polite">
        <div>
            <div style="font-weight:700; color:#fff;">Detalle</div>
            <div class="muted" style="font-size:.92rem; margin-top:6px;" id="productDetail">Optimización de sistema y BIOS.</div>
        </div>
        <div style="min-width:120px; text-align:right;">
            <div class="muted" style="font-size:.88rem;">Total</div>
            <div style="font-weight:800; font-size:1.05rem; color:var(--success);" id="productPriceSmall">$50.000 ARS</div>
        </div>
    </div>

    <div class="trust" aria-hidden="false">
        <h3>Seguridad y confianza</h3>
        <ul>
            <li><svg class="check" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path d="M9.000 16.2L4.8 12l1.4-1.4L9 13.4l9.8-9.8L20.2 5l-11.2 11.2z"/></svg>Pago seguro — certificados SSL y redirección segura.</li>
            <li><svg class="check" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path d="M9.000 16.2L4.8 12l1.4-1.4L9 13.4l9.8-9.8L20.2 5l-11.2 11.2z"/></svg>Validación de comprobantes manual vía WhatsApp para transferencias/crypto.</li>
            <li><svg class="check" viewBox="0 0 24 24" width="18" height="18" aria-hidden="true"><path d="M9.000 16.2L4.8 12l1.4-1.4L9 13.4l9.8-9.8L20.2 5l-11.2 11.2z"/></svg>Política de reembolso clara (contacto en 48h tras comprobante).</li>
        </ul>
    </div>

    <div class="method-panel" id="methodPanel" aria-live="polite">
        <div class="method-name" id="methodTitle">MercadoPago</div>
        <div class="method-desc" id="methodDesc">Serás redirigido al checkout seguro de MercadoPago.</div>
        <div class="action-row">
            <button class="btn-pay" id="actionPay">Pagar</button>
            <button class="btn-small" id="btnCopyInfo">Copiar info</button>
            <div style="flex:1"></div>
        </div>
        <div class="muted" id="methodNote" style="font-size:.88rem;">
            Se aplican comisiones según el método. Si elegís transferencia o crypto, subí el comprobante por WhatsApp.
        </div>
        <div id="paypal-container" style="margin-top:10px;"></div>
    </div>

    <div class="cards-accepted">
        <img src="img/visa.png" alt="Visa" class="card-icon">
        <img src="img/mastercard.png" alt="MasterCard" class="card-icon">
        <img src="img/amex.png" alt="American Express" class="card-icon">
    </div>
</div>

<!-- RIGHT -->
<aside class="checkout-right" aria-label="Seleccionar método de pago">
    <div class="icons-title">Elige un método</div>
    <div class="icons-wrap" role="tablist" aria-orientation="vertical">
        <button class="pay-icon active" data-method="mp" aria-label="MercadoPago" title="MercadoPago" role="tab" aria-selected="true">
            <img src="assets/icons/mercadopago.png" alt="MercadoPago logo">
        </button>
        <button class="pay-icon" data-method="paypal" aria-label="PayPal" title="PayPal" role="tab" aria-selected="false">
            <img src="assets/icons/paypal.png" alt="PayPal logo">
        </button>
        <button class="pay-icon" data-method="bank" aria-label="Transferencia bancaria" title="Transferencia" role="tab" aria-selected="false">
            <img src="assets/icons/bank.png" alt="Transferencia logo">
        </button>
        <button class="pay-icon" data-method="crypto" aria-label="Criptomonedas" title="Crypto" role="tab" aria-selected="false">
            <img src="assets/icons/crypto.png" alt="Crypto logo">
        </button>
    </div>
    <div class="icons-note muted">Logos oficiales — seleccioná para ver instrucciones.</div>
</aside>

</div>

<div id="sxzTooltip" class="sxz-tooltip" role="status" aria-hidden="true">Copiado!</div>

<!-- PayPal SDK -->
<script src="https://www.paypal.com/sdk/js?client-id=sb&currency=ARS"></script>

<script>
const icons = Array.from(document.querySelectorAll('.pay-icon'));
const methodTitle = document.getElementById('methodTitle');
const methodDesc = document.getElementById('methodDesc');
const methodNote = document.getElementById('methodNote');
const actionPay = document.getElementById('actionPay');
const tooltip = document.getElementById('sxzTooltip');
const paypalContainer = document.getElementById('paypal-container');

let activeMethod = 'mp';
let cartTotalValue = 50000; // total actual
let paypalRendered = false;

const METHODS = {
    mp: {title:'MercadoPago', desc:'Serás redirigido al checkout seguro de MercadoPago.', note:'Procesa tarjetas y pagos locales.', actionText:'Pagar con MercadoPago'},
    paypal:{title:'PayPal', desc:'Pago internacional con tarjeta vía PayPal.', note:'Ideal para pagos internacionales.', actionText:'Pagar con PayPal'},
    bank:{title:'Transferencia bancaria', desc:'Copiá el alias y enviá comprobante por WhatsApp.', note:'Validación manual.', actionText:'Copiar Alias'},
    crypto:{title:'Criptomonedas (USDT BEP20)', desc:'Envía USDT a la wallet indicada y subí comprobante.', note:'Comisiones de red pueden aplicar.', actionText:'Copiar dirección'}
};

function updateMethodUI(method){
    activeMethod = method;
    icons.forEach(btn=>btn.classList.toggle('active', btn.dataset.method===method));
    const cfg = METHODS[method] || METHODS.mp;
    methodTitle.textContent = cfg.title;
    methodDesc.textContent = cfg.desc;
    methodNote.textContent = cfg.note;
    actionPay.textContent = cfg.actionText;

    if(activeMethod==='paypal'){
        actionPay.style.display='none';
        paypalContainer.style.display='block';
        if(!paypalRendered){
            renderPaypalButton();
            paypalRendered = true;
        }
    } else {
        actionPay.style.display='inline-block';
        paypalContainer.style.display='none';
    }
}

icons.forEach(btn=>{
    btn.addEventListener('click', ()=>updateMethodUI(btn.dataset.method));
    btn.addEventListener('keydown', e=>{ if(e.key==='Enter'||e.key===' ') { e.preventDefault(); btn.click(); }});
});

function showTooltipNear(target, text='¡Copiado!'){
    tooltip.textContent=text;
    tooltip.style.display='block';
    tooltip.setAttribute('aria-hidden','false');
    const r = target.getBoundingClientRect();
    tooltip.style.left=(Math.max(8,r.left+(r.width/2)-40))+'px';
    tooltip.style.top=(window.scrollY+r.top-36)+'px';
    tooltip.classList.add('show');
    clearTimeout(tooltip._timer);
    tooltip._timer=setTimeout(()=>{tooltip.classList.remove('show'); tooltip.setAttribute('aria-hidden','true');},1400);
}

async function copyText(text, trigger){
    try { await navigator.clipboard.writeText(text); showTooltipNear(trigger); } 
    catch{ const ta=document.createElement('textarea'); ta.value=text; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove(); showTooltipNear(trigger);}
}

actionPay.addEventListener('click', async ev=>{
    ev.preventDefault();
    actionPay.classList.add('loading'); 
    actionPay.disabled = true;

    if(activeMethod==='mp'){ 
        await new Promise(r=>setTimeout(r,1200)); 
        alert(`Redirigiendo a MercadoPago — Total: $${cartTotalValue}`);
    } else if(activeMethod==='bank'){
        copyText('ALIAS_DE_EJEMPLO', actionPay);
    } else if(activeMethod==='crypto'){
        copyText('0xABCDEF123456789', actionPay);
    }

    actionPay.classList.remove('loading');
    actionPay.disabled = false;
});

// Render PayPal solo 1 vez
function renderPaypalButton(){
    paypal.Buttons({
        createOrder: function(data, actions){
            return actions.order.create({
                purchase_units: [{
                    amount: { value: cartTotalValue.toString() }
                }]
            });
        },
        onApprove: function(data, actions){
            return actions.order.capture().then(function(details){
                alert('Pago aprobado por ' + details.payer.name.given_name);
            });
        },
        onError: function(err){
            console.error(err);
            alert('Error en PayPal: ' + err);
        }
    }).render('#paypal-container');
}
</script>

</body>
</html>
